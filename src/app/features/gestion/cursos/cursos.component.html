<div class="page-container">
  <div class="page-header">
    <div class="search-bar">
      <input
        type="text"
        placeholder="Buscar por código o nombre..."
        [(ngModel)]="searchTerm"
        (ngModelChange)="filtrar()"
      />
    </div>
    @if (authService.isAdmin()) {
      <button class="btn btn-primary" (click)="nuevo()">+ Nuevo</button>
    }
  </div>

  <div class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          <th>Código</th>
          <th>Nombre</th>
          <th>Descripción</th>
          <th>Comisiones</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        @for (curso of cursos(); track curso.curId) {
          <tr>
            <td>{{ curso.curCodigo }}</td>
            <td>{{ curso.curNombre }}</td>
            <td>{{ curso.curDescripcion || '-' }}</td>
            <td class="comisiones-cell">
              @if (curso.comisionesActivas && curso.comisionesActivas.length > 0) {
                {{ curso.comisionesActivas.join(', ') }}
              } @else {
                -
              }
            </td>
            <td class="actions">
              <button class="btn-icon btn-icon-info" (click)="ver(curso)" title="Ver">
                <span class="material-icons">visibility</span>
              </button>
              @if (authService.isAdmin()) {
                <button class="btn-icon btn-icon-secondary" (click)="editar(curso)" title="Editar">
                  <span class="material-icons">edit</span>
                </button>
                <button class="btn-icon btn-icon-danger" (click)="eliminar(curso)" title="Eliminar">
                  <span class="material-icons">delete</span>
                </button>
              }
            </td>
          </tr>
        } @empty {
          <tr>
            <td colspan="5" class="empty-message">No se encontraron cursos</td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>
